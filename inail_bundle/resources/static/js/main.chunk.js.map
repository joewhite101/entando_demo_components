{"version":3,"sources":["../external \"React\"","questions/QuestionList.js","questions/QuestionRate.js","questions/QuestionText.js","questions/Survey.js","api/SurveyApi.js","common/Loader.js","common/Feedback.js","questions/SurveyManager.js","admin/SurveyList.js","admin/questions/QuestionListDetails.js","admin/questions/QuestionRateDetails.js","admin/SurveyAnalytics.js","admin/questions/QuestionTextDetails.js","admin/SurveySubmissionList.js","admin/SurveyDetails.js","admin/SurveySubmissionDetails.js","admin/SurveyAdmin.js","index.js","../external \"ReactDOM\""],"names":["module","exports","React","Option","Select","QuestionList","state","values","onChangeValue","value","_this","setState","onValueChange","onChange","e","multipleChoice","props","_e$target","target","checked","index","indexOf","contains","splice","push","_this$props","this","length","_this2","_this$props2","question","options","external_React_default","a","createElement","className","map","item","es_checkbox","key","label","es_select","showSearch","style","width","placeholder","optionFilterProp","filterOption","input","option","children","toLowerCase","es_radio","Group","Component","defaultProps","id","type","QuestionRate","processProps","_props$maxRate","maxRate","_props$minRate","minRate","quantity","Array","apply","_","nextProps","nextContext","Button","propTypes","PropTypes","string","isRequired","number","TextArea","Input","QuestionText","minLength","maxLength","concat","fontSize","autosize","minRows","questionTypes","list","rate","text","Survey","answers","finished","submit","onSubmit","Object","keys","questionId","_answers$questionId","visible","filter","_ref","_ref2","result","_ref3","valid","stateAnswers","stateAnswer","answer","objectSpread","defineProperty","questions","when","forEach","oldVisible","evaluate","expression","setAnswers","renderQuestion","Question","assign","exec","operator","comparing","Number","shouldRender","undefined","_ref4","hasOwnProperty","divider","padding","paddingTop","es_button","disabled","onClick","config","serviceUrl","token","prepareAxiosConfig","axiosConfig","headers","Authorization","setServiceUrl","setToken","fetchSurvey","asyncToGenerator","regenerator_default","mark","_callee","surveyId","data","wrap","_context","prev","next","axios","get","sent","abrupt","stop","_x","arguments","submitSurvey","_callee2","_context2","post","_x2","_x3","adminListSurveys","_ref6","_callee3","_ref5","_ref5$page","page","_ref7","_context3","_x4","adminListSurveySubmissions","_ref9","_callee4","_ref8","_ref8$page","_ref10","_context4","_x5","_x6","adminDownloadSurveySubmissionsPDF","_ref11","_callee5","submissionIds","downloadLink","_context5","document","href","join","download","click","console","log","Promise","resolve","setTimeout","_x7","_x8","adminGetSurveyDetail","_ref12","_callee6","_ref13","_context6","_x9","adminGetSurveySubmissionDetail","_ref14","_callee7","submissionId","_ref15","_context7","_x10","_x11","adminGetQuestionSubmissions","_ref16","_callee8","_ref17","_context8","require","_x12","_x13","Loader","Feedback","loading","error","onRetry","common_Loader","status","title","subTitle","extra","SurveyManager","loaded","submitting","request","then","success","catch","clearError","fetchData","renderContent","survey","Survey_Survey","spin","tip","payload","_this$state","Feedback_Feedback","columns","dataIndex","render","row","react_router_dom","to","SurveyList","dataSource","metadata","es_table","rowKey","QuestionListDetails","calculateProgress","Math","floor","random","progress","percent","submissions","card","pagination","showHeader","QuestionRateDetails","average","statistic","precision","es_row","user","col","span","comment","author","content","SurveyAnalytics","external_React_","SurveySubmissionList","exporting","selectedRowKeys","onSelectChange","exportPdf","finish","rowSelection","exportButton","table","TabPane","Tabs","SurveyDetails","match","params","t0","message","tabs","tab","SurveySubmissionList_SurveySubmissionList","SurveyAnalytics_SurveyAnalytics","getSelectedLabels","selectedKeys","opt","answerTypes","answerText","SurveySubmissionDetails_Question","selectedRate","SurveySubmissionDetails","processSubmission","Answer","submission","q","SurveyAdmin","react_router","path","exact","component","EntandoSurvey","mountPoint","appendChild","surveyApi","getAttribute","localStorage","getItem","ReactDOM","HTMLElement","EntandoAdmin","customElements","define"],"mappings":"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","file":"entando-survey/static/js/main.chunk.js","sourcesContent":["module.exports = React;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Radio from 'antd/es/radio';\nimport Checkbox from 'antd/es/checkbox';\nimport Select from 'antd/es/select';\nimport './Question.css';\n\nconst { Option } = Select;\n\nexport default class QuestionList extends Component {\n\n  state = { values: [] };\n\n  onChangeValue = value => {\n    this.setState({ value });\n    this.onValueChange(value);\n  };\n\n  onChange = e => {\n    const { multipleChoice } = this.props;\n    const { values } = this.state;\n    const { value, checked } = e.target;\n\n    if (multipleChoice) {\n      const index = values.indexOf(value);\n      const contains = index !== -1;\n\n      if (contains && !checked) {\n        values.splice(index, 1);\n      } else if (!contains && checked) {\n        values.push(value);\n      }\n\n      this.setState({ values });\n      this.onValueChange(values);\n    } else {\n      this.onChangeValue(value);\n    }\n  };\n\n  onValueChange(value) {\n    const { multipleChoice, onValueChange } = this.props;\n    if (multipleChoice) {\n      onValueChange(value, value.length > 0);\n    } else {\n      onValueChange([value], !!value);\n    }\n  }\n\n  render() {\n    const { question, options, multipleChoice } = this.props;\n    return (\n      <div className=\"question-container\">\n        <div className=\"question\">{question}</div>\n        {multipleChoice ? (\n          <div>\n            {options.map(item => (\n              <Checkbox key={item.key} className=\"option\" value={item.key} onChange={this.onChange}>\n                {item.label}\n              </Checkbox>\n            ))}\n          </div>\n        ): (\n          <div>\n            {options.length > 5 ? (\n              <Select\n                showSearch\n                onChange={this.onChangeValue}\n                style={{ width: '100%' }}\n                placeholder=\"Select one option\"\n                optionFilterProp=\"children\"\n                filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n              >\n                {options.map(item => (\n                  <Option key={item.key} value={item.key}>\n                    {item.label}\n                  </Option>\n                ))}\n              </Select>\n            ) : (\n              <Radio.Group onChange={this.onChange} value={this.state.value}>\n                {options.map(item => (\n                  <Radio key={item.key} className=\"option\" value={item.key}>\n                    {item.label}\n                  </Radio>\n                ))}\n              </Radio.Group>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nQuestionList.propTypes = {\n  id: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  question: PropTypes.string.isRequired,\n\n  multipleChoice: PropTypes.bool.isRequired,\n  options: PropTypes.arrayOf(PropTypes.shape({\n    key: PropTypes.string.isRequired,\n    label: PropTypes.string.isRequired,\n  })).isRequired,\n};\n\nQuestionList.defaultProps = {\n  id: '',\n  type: 'list',\n  question: '',\n  multipleChoice: false,\n  options: [],\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Radio from 'antd/es/radio';\nimport './Question.css';\nimport QuestionList from './QuestionList';\n\nexport default class QuestionRate extends Component {\n\n  state = { value: null, values: [] };\n\n  onChange = e => {\n    const { value } = e.target;\n    this.setState({ value });\n    this.props.onValueChange(value, true);\n  };\n\n  componentWillMount() {\n    this.processProps(this.props);\n  }\n\n  processProps(props) {\n    const { maxRate = 10, minRate = 0 } = props;\n    const quantity = maxRate - minRate;\n    const values = Array.apply(null, Array(quantity + 1)).map((_, index) => index + minRate);\n    this.setState({ values });\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    this.processProps(nextProps);\n  }\n\n  render() {\n    const { question } = this.props;\n    const { values } = this.state;\n    return (\n      <div className=\"question-container\">\n        <div className=\"question\">{question}</div>\n        <Radio.Group value={this.state.value} onChange={this.onChange}>\n          {values.map(value => (\n            <Radio.Button key={value} value={value}>{value}</Radio.Button>\n          ))}\n        </Radio.Group>\n      </div>\n    );\n  }\n}\n\nQuestionList.propTypes = {\n  id: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  question: PropTypes.string.isRequired,\n  minRate: PropTypes.number.isRequired,\n  maxRate: PropTypes.number.isRequired,\n};\n\nQuestionList.defaultProps = {\n  id: '',\n  type: 'rate',\n  question: '',\n  minRate: 0,\n  maxRate: 10,\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Input from 'antd/es/input';\nimport './Question.css';\nimport QuestionList from './QuestionList';\n\nconst { TextArea } = Input;\n\nexport default class QuestionText extends Component {\n\n  state = { value: '' };\n\n  onChange = e => {\n    const { onValueChange, minLength } = this.props;\n    const { value } = e.target;\n    this.setState({ value });\n    onValueChange(value, value.length >= minLength);\n  };\n\n  render() {\n    const { question, maxLength, minLength } = this.props;\n    return (\n      <div className=\"question-container\">\n        <div className=\"question\">{question}</div>\n        <span className=\"help\">\n          {minLength > 0 ? `Fill at least ${minLength} characters` : null}\n        </span>\n        <TextArea\n          style={{ fontSize: 18 }}\n          onChange={this.onChange}\n          placeholder=\"Describe your answer here\"\n          autosize={{ minRows: 3 }}\n          maxLength={maxLength}\n        />\n        <span className=\"length\">\n          {`${this.state.value.length}/${maxLength}`}\n        </span>\n      </div>\n    );\n  }\n}\n\nQuestionList.propTypes = {\n  type: PropTypes.string.isRequired,\n  question: PropTypes.string.isRequired,\n  minLength: PropTypes.number.isRequired,\n  maxLength: PropTypes.number.isRequired,\n};\n\nQuestionList.defaultProps = {\n  type: 'text',\n  question: '',\n  minLength: 1,\n  maxLength: 200,\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'antd/es/button';\nimport Divider from 'antd/es/divider';\nimport QuestionList from './QuestionList';\nimport QuestionRate from './QuestionRate';\nimport QuestionText from './QuestionText';\n\nimport './Survey.css';\n\nconst questionTypes = {\n  list: QuestionList,\n  rate: QuestionRate,\n  text: QuestionText\n};\n\nexport default class Survey extends Component {\n\n  state = { answers: {}, finished: false };\n\n  componentWillMount() {\n    this.processProps(this.props);\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    this.processProps(nextProps);\n  }\n\n  processProps(props) {\n    const answers = {};\n    if (props.questions !== undefined) {\n      props.questions.forEach(({ id, type, when }) => {\n        answers[id] = { valid: !!when, questionId: id, type, visible: !when };\n      });\n      this.setState({ answers });\n    }\n  }\n\n  submit = () => {\n    const { onSubmit } = this.props;\n    const { answers } = this.state;\n    const request = Object.keys(answers)\n      .map(questionId => {\n        const { type, value, visible } = answers[questionId];\n        return { type, value, questionId, visible };\n      })\n      .filter(({ visible }) => visible)\n      .map(({ type, value, questionId }) => {\n        const result = { questionId, type };\n\n        // in the future we will evolve to more than one property\n        // when we have more types, it will make more sense\n        // to create a better archicecture to scale\n        if (type === 'rate') {\n          result['selectedRate'] = value;\n        } else if (type === 'text') {\n          result['answerText'] = value\n        } else if (type === 'list') {\n          result['selectedKeys'] = value\n        }\n\n        return result;\n      });\n    onSubmit(request);\n  };\n\n  onValueChange = ({ id, key }) => {\n    return (value, valid) => {\n      const stateAnswers = this.state.answers;\n      const stateAnswer = stateAnswers[id];\n      const answer = { ...stateAnswer };\n\n      answer.valid = valid;\n      if (valid) answer.value = value;\n\n      const answers = { ...stateAnswers, [id]: answer };\n\n      this.props.questions.filter(question => question.when && question.when.question === key)\n        .forEach(question => {\n          const answer = answers[question.id];\n          const oldVisible = answer.visible;\n          answer.visible = this.evaluate(question.when.expression, value);\n          if (!oldVisible && answer.visible) {\n            answer.valid = false;\n          }\n        });\n\n      this.setAnswers(answers);\n    };\n  };\n\n  setAnswers(answers) {\n    let finished = true;\n    for (let key in answers) {\n      if (answers.hasOwnProperty(key)) {\n        const answer = answers[key];\n        finished &= answer.valid || !answer.visible;\n      }\n    }\n    this.setState({ answers, finished });\n  }\n\n  renderQuestion = question => {\n    const Question = questionTypes[question.type];\n    return Question && (\n      <Question key={question.id} {...question} onValueChange={this.onValueChange(question)} />\n    );\n  };\n\n  evaluate = (expression, value) => {\n    const result = /(!|=|<|>|<=|>=) (.*)/g.exec(expression);\n    if (result) {\n      const operator = result[1];\n      const comparing = result[2];\n      switch (operator) {\n        case '=':\n          if (typeof value === \"number\")\n            return Number(comparing) === value;\n          else if (typeof value === \"string\")\n            return comparing === value;\n          else if (value && value.length)\n            return comparing === value[0];\n          else return false;\n        case '!=': return typeof value === \"number\" ? Number(comparing) !== value : comparing !== value;\n        case '<': return Number(comparing) < value;\n        case '>': return Number(comparing) > value;\n        case '<=': return Number(comparing) >= value;\n        case '>=': return Number(comparing) >= value;\n        default: return false;\n      }\n    }\n  };\n\n  shouldRender = question => {\n    return this.state.answers[question.id].visible;\n  };\n\n  render() {\n    return (\n      <div className=\"survey\">\n        {this.props.questions.filter(this.shouldRender).map(this.renderQuestion)}\n        <Divider />\n        <div style={{ padding: 20, paddingTop: 0 }}>\n          <Button type=\"primary\" disabled={!this.state.finished} onClick={this.submit}>Submit</Button>\n        </div>\n      </div>\n    )\n  }\n}\n\nSurvey.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n\n  questions: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n    question: PropTypes.string.isRequired,\n\n    minRate: PropTypes.number,\n    maxRate: PropTypes.number,\n\n    multipleChoice: PropTypes.bool,\n    options: PropTypes.arrayOf(PropTypes.shape({\n      key: PropTypes.string.isRequired,\n      label: PropTypes.string.isRequired,\n    })),\n\n    maxLength: PropTypes.number,\n    minLength: PropTypes.number,\n\n    when: PropTypes.shape({\n      question: PropTypes.string.isRequired,\n      expression: PropTypes.string.isRequired,\n    }),\n  })).isRequired,\n};\n\n\nSurvey.defaultProps = {\n  questions: [],\n  onSubmit: () => {}\n};","import axios from 'axios';\n\n// const USE_MOCKS = process.env.USE_MOCKS;\nconst USE_MOCKS = false\nconst config = { serviceUrl: '/entando-survey', token: undefined};\n\nconst prepareAxiosConfig = () => {\n  let axiosConfig = {};\n  if (config.token) {\n    axiosConfig = {\n      headers: {'Authorization': \"Bearer \" + config.token}\n    } \n  } \n  return axiosConfig;\n};\n\nexport const setServiceUrl = (serviceUrl) => {\n  if (serviceUrl) config.serviceUrl = serviceUrl;\n};\n\nexport const setToken = (token) => {\n  if (token) config.token = token;\n}\n\nexport const fetchSurvey = async (surveyId) => {\n  if (USE_MOCKS) {\n    console.log(\"Using mock method\");\n    return require('../__mocks__/survey.json');\n  }\n  const { data } = await axios.get(`${config.serviceUrl}/surveys/${surveyId}`, prepareAxiosConfig());\n  return data;\n};\n\nexport const submitSurvey = async (surveyId, answers) => {\n  if (USE_MOCKS) {\n    console.log(\"Using mock method\");\n    return;\n  }\n  const { data } = await axios.post(`${config.serviceUrl}/surveys/${surveyId}/submissions`, { answers }, prepareAxiosConfig());\n  return data;\n};\n\nexport const adminListSurveys = async ({ page = 1 }) => {\n  if (USE_MOCKS) {\n    console.log(\"Using mock method\");\n    return require('../__mocks__/survey_list.json');\n  }\n  const { data } = await axios.get(`${config.serviceUrl}/surveys?page=${page}`, prepareAxiosConfig());\n  return data;\n};\n\nexport const adminListSurveySubmissions = async (surveyId, { page = 1 }) => {\n  if (USE_MOCKS) {\n    console.log(\"Using mock method\");\n    return require('../__mocks__/survey_submission_list.json');\n  }\n  const { data } = await axios.get(`${config.serviceUrl}/surveys/${surveyId}/submissions?page=${page}`, prepareAxiosConfig());\n  return data;\n};\n\nexport const adminDownloadSurveySubmissionsPDF = async (surveyId, submissionIds) => {\n  if (USE_MOCKS) {\n    console.log(\"Using mock method\");\n    return;\n  }\n\n  const downloadLink = document.createElement('a');\n  downloadLink.href = `${config.serviceUrl}/surveys/${surveyId}/submissions/export?submissionIds=${submissionIds.join(',')}`;\n  downloadLink.download = 'survey_export.pdf';\n  downloadLink.click();\n\n  console.log('Downloading PDF', downloadLink.href);\n\n  // to avoid double clicks\n  return new Promise(resolve => setTimeout(resolve, 500));\n};\n\nexport const adminGetSurveyDetail = async (surveyId) => {\n  if (USE_MOCKS) {\n    console.log(\"Using mock method\");\n    return require('../__mocks__/survey_details.json');\n  }\n  const { data } = await axios.get(`${config.serviceUrl}/surveys/${surveyId}`, prepareAxiosConfig());\n  return data;\n};\n\nexport const adminGetSurveySubmissionDetail = async (surveyId, submissionId) => {\n  if (USE_MOCKS) {\n    console.log(\"Using mock method\");\n    return require('../__mocks__/survey_submission_detail.json');\n  }\n  const { data } = await axios.get(`${config.serviceUrl}/surveys/${surveyId}/submissions/${submissionId}`, prepareAxiosConfig());\n  return data;\n};\n\nexport const adminGetQuestionSubmissions = async (surveyId, questionId) => {\n  if (USE_MOCKS || true) {\n    console.log(\"Using mock method\");\n    return require('../__mocks__/survey_question_text_submissions.json');\n  }\n  const { data } = await axios.get(`${config.serviceUrl}/admin/survey/${surveyId}/answers/${questionId}`, prepareAxiosConfig());\n  return data;\n};","import React from 'react';\n\nconst Loader = () => <div>Loading...</div>;\n\nexport default Loader;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Result from 'antd/es/result';\nimport Button from 'antd/es/button';\n\nimport Loader from './Loader';\n\nexport default class Feedback extends Component {\n\n  render() {\n    const { loading, error, onRetry, children } = this.props;\n    if (loading) {\n      return <Loader />;\n    }\n    if (error) {\n      return (\n        <Result\n          status=\"error\"\n          title={error}\n          subTitle=\"Please try again\"\n          extra={[<Button onClick={onRetry}>Back</Button>]}\n        />\n      )\n    }\n    return children();\n  }\n\n}\n\nFeedback.propTypes = {\n  loading: PropTypes.bool,\n  error: PropTypes.string,\n  onRetry: PropTypes.func.isRequired,\n  children: PropTypes.func.isRequired,\n};\n\nFeedback.defaultProps = {\n  loading: false,\n  error: '',\n  onRetry: () => {},\n  children: () => {},\n};","import React, { Component } from 'react';\nimport Survey from './Survey';\nimport PropTypes from 'prop-types';\nimport Result from 'antd/es/result';\nimport Spin from 'antd/es/spin';\nimport { fetchSurvey, submitSurvey } from '../api/SurveyApi';\nimport Feedback from '../common/Feedback';\n\nexport default class SurveyManager extends Component {\n  state = {\n    loaded: false,\n    loading: false,\n    submitting: false,\n    questions: []\n  };\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  async fetchData() {\n    const { surveyId } = this.props;\n    this.setState({ loading: true });\n    fetchSurvey(surveyId)\n      .then(({ payload }) => this.setState({ ...payload, loaded: true }))\n      .catch(() => { this.setState({ error: 'Something bad happened' })})\n      .then(() => this.setState({ loading: false }));\n  }\n\n  onSubmit = request => {\n    const { surveyId } = this.props;\n    this.setState({ submitting: true });\n    submitSurvey(surveyId, request)\n      .then(() => this.setState({ success: true }))\n      .catch(() => this.setState({ error: 'Something bad happened' }))\n      .then(() => this.setState({ submitting: false }))\n  };\n\n  clearError = () => {\n    this.setState({ error: null });\n    if (!this.state.loaded) {\n      this.fetchData();\n    }\n  };\n\n  renderContent = () => {\n    const survey = <Survey questions={this.state.questions} onSubmit={this.onSubmit} />;\n    return this.state.submitting\n      ? <Spin tip=\"Submitting Survey\">{survey}</Spin>\n      : survey;\n  };\n\n  render() {\n    const { success, error, loading } = this.state;\n    return success ? (\n      <Result status=\"success\"\n              title=\"The survey has been submitted successfully\"\n              subTitle=\"We really appreciate your contribution\" />\n    ) : (\n      <Feedback error={error} loading={loading} onRetry={this.clearError}>\n        {this.renderContent}\n      </Feedback>\n    );\n  }\n}\n\nSurveyManager.propTypes = {\n  surveyId: PropTypes.string.isRequired,\n};\n\nSurveyManager.defaultProps = {\n  surveyId: ''\n};","import React, { Component } from 'react';\nimport { adminListSurveys } from '../api/SurveyApi';\nimport Table from 'antd/es/table';\nimport { Link } from 'react-router-dom';\n\nimport 'antd/lib/table/style/css';\n\nconst columns = [\n  {\n    title: 'Title',\n    dataIndex: 'title',\n    key: 'title',\n    render: (title, row) => <Link to={`/${row.id}`}>{title}</Link>\n  },\n  {\n    title: 'Submissions',\n    dataIndex: 'submissions',\n    key: 'submissions',\n    render: () => 376, // TODO submissions from backend\n  },\n  {\n    title: 'Description',\n    dataIndex: 'description',\n    key: 'description',\n  },\n];\n\nexport default class SurveyList extends Component {\n\n  state = {\n    loading: false,\n    dataSource: [],\n  };\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  async fetchData() {\n    try {\n      this.setState({ loading: true });\n      const { payload, metadata } = await adminListSurveys({ page: 1 });\n      this.setState({ dataSource: payload, metadata });\n    } finally {\n      this.setState({ loading: false });\n    }\n  }\n\n  render() {\n    return <Table rowKey=\"id\"\n                  dataSource={this.state.dataSource}\n                  loading={this.state.loading}\n                  columns={columns} />;\n  }\n\n}\n","import React, { Component } from 'react';\nimport Progress from 'antd/es/progress';\nimport Card from 'antd/es/card';\nimport Table from 'antd/es/table';\n\nexport default class QuestionListDetails extends Component {\n  calculateProgress = () => {\n    return Math.floor((Math.random() * 100));\n  };\n\n  columns = [\n    {\n      title: 'Option',\n      dataIndex: 'label',\n      key: 'label',\n    },\n    {\n      title: 'Submissions',\n      dataIndex: 'submissions',\n      key: 'submissionsQuantity',\n      render: () => `376` // TODO submissions from backend\n    },\n    {\n      title: 'Submissions',\n      dataIndex: 'submissions',\n      key: 'submissionsProgress',\n      render: row => <Progress percent={this.calculateProgress(row)}  />,\n      width: '100%'\n    },\n  ];\n\n  render() {\n    const { question, options, submissions } = this.props;\n    return (\n      <Card className=\"questionDetail\" title={question} extra={`${submissions} submissions`}>\n        <Table rowKey=\"key\"\n               pagination={false}\n               showHeader={false}\n               dataSource={options}\n               columns={this.columns} />\n      </Card>\n    )\n  }\n}","import React, { Component } from 'react';\nimport Card from 'antd/es/card';\nimport Statistic from 'antd/es/statistic';\n\nexport default class QuestionRateDetails extends Component {\n  render() {\n    const { question, submissions } = this.props;\n\n    // TODO calculate average from backend\n    const { minRate, maxRate } = this.props;\n    const average = (minRate + maxRate) / 2;\n    \n    return (\n      <Card className=\"questionDetail\" title={question} extra={`${submissions} submissions`}>\n        <Statistic\n          value={average}\n          precision={2}\n        />\n      </Card>\n    )\n  }\n}","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\n\nimport QuestionListDetails from './questions/QuestionListDetails';\nimport QuestionRateDetails from './questions/QuestionRateDetails';\nimport QuestionTextDetails from './questions/QuestionTextDetails';\n\nconst questionTypes = {\n  list: QuestionListDetails,\n  rate: QuestionRateDetails,\n  text: QuestionTextDetails\n};\n\nexport default class SurveyAnalytics extends Component {\n\n  renderQuestion = question => {\n    const Question = questionTypes[question.type];\n    return Question && (\n      <Question key={question.id} {...question} submissions={this.props.survey.submissions}/>\n    );\n  };\n  \n  render() {\n    const { survey } = this.props;\n    return <Fragment>{survey.questions.map(this.renderQuestion)}</Fragment>\n  }\n  \n}\n\nSurveyAnalytics.propTypes = {\n  survey: PropTypes.shape({\n    questions: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      type: PropTypes.string.isRequired,\n      question: PropTypes.string.isRequired,\n\n      minRate: PropTypes.number,\n      maxRate: PropTypes.number,\n\n      multipleChoice: PropTypes.bool,\n      options: PropTypes.arrayOf(PropTypes.shape({\n        key: PropTypes.string.isRequired,\n        label: PropTypes.string.isRequired,\n      })),\n\n      maxLength: PropTypes.number,\n      minLength: PropTypes.number,\n    })).isRequired,\n  }),\n};\n\n\nSurveyAnalytics.defaultProps = {\n  survey: { questions: [] }\n};","import React, { Component } from 'react';\nimport Card from 'antd/es/card';\nimport Row from 'antd/es/row';\nimport Col from 'antd/es/col';\nimport Comment from 'antd/es/comment';\nimport Loader from '../../common/Loader';\nimport { adminGetQuestionSubmissions } from '../../api/SurveyApi';\n\nexport default class QuestionTextDetails extends Component {\n  state = { loading: true };\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  async fetchData() {\n    try {\n      const { questionId, id } = this.props;\n      this.setState({ loading: true });\n      const { payload, metadata } = await adminGetQuestionSubmissions(questionId, id);\n      this.setState({ answers: payload, metadata });\n    } finally {\n      this.setState({ loading: false });\n    }\n  }\n\n  render() {\n    const { question, submissions } = this.props;\n    return (\n      <Card className=\"questionDetail\" title={question} extra={`${submissions} submissions`}>\n        <Row>\n          {this.state.loading ? <Loader/> : (\n            this.state.answers.map(({ id, user, answer }) => (\n              <Col key={id} span={12}>\n                <Card>\n                  <Comment\n                    className=\"answerText\"\n                    author={user}\n                    content={<p>{answer}</p>}\n                  />\n                </Card>\n              </Col>\n            ))\n          )}\n        </Row>\n      </Card>\n    )\n  }\n}\n","import React, { Component, Fragment } from 'react';\nimport Table from 'antd/es/table';\nimport Button from 'antd/es/button';\nimport Card from 'antd/es/card';\nimport Spin from 'antd/es/spin';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { adminListSurveySubmissions, adminDownloadSurveySubmissionsPDF } from '../api/SurveyApi';\n\nimport 'antd/lib/table/style/css';\n\nconst columns = [\n  {\n    title: '#',\n    dataIndex: 'submissionId',\n    key: 'submissionId',\n    render: (title, row) => <Link to={`/${row.surveyId}/submissions/${row.submissionId}`}>{title}</Link>\n  },\n  {\n    title: 'Date',\n    dataIndex: 'submissionDate',\n    key: 'submissionDate',\n  },\n];\n\nexport default class SurveySubmissionList extends Component {\n\n  state = {\n    loading: false,\n    exporting: false,\n    dataSource: [],\n    selectedRowKeys: [],\n  };\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  async fetchData() {\n    try {\n      const { surveyId } = this.props;\n      this.setState({ loading: true });\n      const { payload, metadata } = await adminListSurveySubmissions(surveyId, { page: 1 });\n      this.setState({ dataSource: payload, metadata });\n    } finally {\n      this.setState({ loading: false });\n    }\n  }\n\n  onSelectChange = selectedRowKeys => {\n    this.setState({ selectedRowKeys });\n  };\n\n  exportPdf = async () => {\n    const { surveyId } = this.props;\n    try {\n      this.setState({ exporting: true });\n      await adminDownloadSurveySubmissionsPDF(surveyId, this.state.selectedRowKeys);\n    } finally {\n      this.setState({ exporting: false });\n    }\n\n  };\n\n  render() {\n    const { selectedRowKeys, dataSource, loading } = this.state;\n    const rowSelection = { selectedRowKeys, onChange: this.onSelectChange };\n\n    const exportButton = (\n      <Button type=\"primary\" disabled={!selectedRowKeys.length} onClick={this.exportPdf}>\n        Export as PDF\n      </Button>\n    );\n\n    const table = (\n      <Table rowKey=\"submissionId\"\n             rowSelection={rowSelection}\n             dataSource={dataSource}\n             loading={loading}\n             columns={columns} />\n    );\n\n    return (\n      <Fragment>\n        <Card title=\"Submissions\" extra={exportButton}>\n          {this.state.exporting ? <Spin tip=\"Exporting\">table</Spin> : table}\n        </Card>\n      </Fragment>\n    );\n  }\n\n}\n\nSurveySubmissionList.propTypes = {\n  surveyId: PropTypes.string.isRequired,\n};\n\nSurveySubmissionList.defaultProps = {\n  surveyId: ''\n};","import React, { Component } from 'react';\nimport Tabs from 'antd/es/tabs';\nimport PropTypes from 'prop-types';\nimport Loader from '../common/Loader';\nimport SurveyAnalytics from './SurveyAnalytics';\nimport SurveySubmissionList from './SurveySubmissionList';\nimport { adminGetSurveyDetail } from '../api/SurveyApi';\n\nimport './SurveyDetails.css';\nimport Feedback from '../common/Feedback';\n\nconst { TabPane } = Tabs;\n\nexport default class SurveyDetails extends Component {\n\n  state = {\n    loading: true,\n    dataSource: [],\n  };\n\n  fetchData = async () => {\n    const { match } = this.props;\n    try {\n      this.setState({ loading: true, error: '' });\n      const { payload } = await adminGetSurveyDetail(match.params.id);\n      payload.submissions = 376; // TODO submissions from backend\n      this.setState({ survey: payload });\n    } catch (err) {\n      this.setState({ error: err.message });\n    } finally {\n      this.setState({ loading: false });\n    }\n  };\n\n  componentDidMount() {\n    this.fetchData();\n  }\n  \n  renderContent = () => (\n    <Tabs>\n      <TabPane tab=\"Responses\" key=\"responses\">\n        <SurveySubmissionList surveyId={this.state.survey.id} />\n      </TabPane>\n      <TabPane tab=\"Analytics\" key=\"analytics\" style={{ padding: '0 15px' }}>\n        {this.state.loading ? <Loader /> : <SurveyAnalytics survey={this.state.survey} />}\n      </TabPane>\n    </Tabs>\n  );\n\n  render() {\n    const { loading, error } = this.state;\n    return (\n      <Feedback error={error} loading={loading} onRetry={this.fetchData}>\n        {this.renderContent}\n      </Feedback>\n    );\n  }\n\n}\n\nSurveyDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n    }),\n  }).isRequired,\n};\n\nSurveyDetails.defaultProps = {\n  match: { params: { id: '' } }\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Card from 'antd/es/card';\nimport { adminGetSurveySubmissionDetail } from '../api/SurveyApi';\n\nimport './SurveyDetails.css';\nimport Feedback from '../common/Feedback';\n\nconst Question = ({ question, answer }) => (\n  <Card className=\"questionDetail\" title={question}>\n    <div>{answer}</div>\n  </Card>\n);\n\nconst getSelectedLabels = (question, selectedKeys) => {\n  return selectedKeys.map(key => question.options\n    .filter(opt => opt.key === key).map(opt => opt.label)[0])\n    .join(', ');\n};\n\nconst answerTypes = {\n  text: ({ answerText, question }) => <Question question={question.question} answer={answerText} />,\n  list: ({ selectedKeys, question }) => <Question question={question.question} answer={getSelectedLabels(question, selectedKeys)} />,\n  rate: ({ selectedRate, question }) => <Question question={question.question} answer={selectedRate} />,\n};\n\nexport default class SurveySubmissionDetails extends Component {\n\n  state = {\n    loading: true,\n    dataSource: [],\n  };\n\n  processSubmission(submission) {\n    const { answers, survey } = submission;\n    const { questions } = survey;\n    const lookupQuestion = (questionId) => questions.filter(q => q.id === questionId)[0];\n    answers.forEach(answer => answer.question = lookupQuestion(answer.questionId));\n    this.setState({ ...submission });\n  }\n\n  fetchData = async () => {\n    const { match: { params } } = this.props;\n    const { surveyId, submissionId } = params;\n    try {\n      this.setState({ loading: true, error: '' });\n      const { payload } = await adminGetSurveySubmissionDetail(surveyId, submissionId);\n      this.processSubmission(payload);\n    } catch (err) {\n      this.setState({ error: err.message });\n    } finally {\n      this.setState({ loading: false });\n    }\n  };\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  renderQuestion = answer => {\n    const Answer = answerTypes[answer.type];\n    return Answer && (\n      <Answer key={answer.questionId} {...answer} />\n    );\n  };\n\n  render() {\n    const { loading, answers, error } = this.state;\n    return (\n      <Feedback error={error} loading={loading} onRetry={this.fetchData}>\n        {() => answers.map(this.renderQuestion)}\n      </Feedback>\n    );\n  }\n\n}\n\nSurveySubmissionDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      surveyId: PropTypes.string.isRequired,\n      submissionId: PropTypes.string.isRequired,\n    }),\n  }).isRequired,\n};\n\nSurveySubmissionDetails.defaultProps = {\n  match: {\n    params: {\n      surveyId: '',\n      submissionId: '' ,\n    }\n  }\n};\n","import React, { Component } from 'react';\nimport { HashRouter as Router, Route } from 'react-router-dom';\n\nimport 'antd/lib/table/style/css';\nimport 'antd/lib/tabs/style/css';\nimport 'antd/lib/card/style/css';\nimport 'antd/lib/progress/style/css';\nimport 'antd/lib/statistic/style/css';\nimport 'antd/lib/row/style/css';\nimport 'antd/lib/col/style/css';\nimport 'antd/lib/comment/style/css';\n\nimport SurveyList from './SurveyList';\nimport SurveyDetails from './SurveyDetails';\nimport SurveySubmissionDetails from './SurveySubmissionDetails';\n\nexport default class SurveyAdmin extends Component {\n  render() {\n    return (\n      <Router>\n        <Route path=\"/\" exact={true} component={SurveyList} />\n        <Route path=\"/:id\" exact={true} component={SurveyDetails} />\n        <Route path=\"/:surveyId/submissions/:submissionId\" component={SurveySubmissionDetails} />\n      </Router>\n    )\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'antd/lib/button/style/css';\nimport 'antd/lib/select/style/css';\nimport 'antd/lib/divider/style/css';\nimport 'antd/lib/input/style/css';\nimport 'antd/lib/radio/style/css';\nimport 'antd/lib/checkbox/style/css';\nimport 'antd/lib/result/style/css';\nimport 'antd/lib/spin/style/css';\n\nimport './index.css';\n\nimport SurveyManager from './questions/SurveyManager';\nimport SurveyAdmin from './admin/SurveyAdmin';\nimport * as surveyApi from './api/SurveyApi';\n\nclass EntandoSurvey extends HTMLElement {\n  connectedCallback() {\n    const mountPoint = document.createElement('div');\n    this.appendChild(mountPoint);\n\n    surveyApi.setServiceUrl(this.getAttribute('service-url'));\n    surveyApi.setToken(localStorage.getItem(\"token\"));\n\n    const surveyId = this.getAttribute('survey-id');\n    ReactDOM.render(React.createElement(SurveyManager, { surveyId: surveyId }, null), mountPoint);\n  }\n}\n\nclass EntandoAdmin extends HTMLElement {\n  connectedCallback() {\n    const mountPoint = document.createElement('div');\n    this.appendChild(mountPoint);\n\n    surveyApi.setServiceUrl(this.getAttribute('service-url'));\n    surveyApi.setToken(localStorage.getItem(\"token\"));\n    ReactDOM.render(React.createElement(SurveyAdmin, {}, null), mountPoint);\n  }\n}\n\ncustomElements.define('en-survey', EntandoSurvey);\ncustomElements.define('en-survey-admin', EntandoAdmin);","module.exports = ReactDOM;"],"sourceRoot":""}