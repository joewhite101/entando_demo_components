(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(e,t){e.exports=React},109:function(e,t,a){},190:function(e,t,a){},206:function(e,t,a){e.exports=a(415)},219:function(e,t,a){},277:function(e,t,a){},294:function(e){e.exports={payload:{id:"982fb709-6148-4fc8-890f-1058ade6e134",title:"INAIL POC",description:"Sample Survey for INAIL POC",questions:[{id:"7aae5609-da9a-491b-bc5c-921ac2a2d7ab",key:"programming-language",type:"list",question:"What is the best programming language in your opinion?",options:[{key:"javascript",label:"Javascript"},{key:"golang",label:"Go"},{key:"java",label:"Java"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"c",label:"C"}],multipleChoice:!1},{id:"ce560312-ace2-44dd-830a-967a7a215a34",type:"text",question:"What do you like most in Java?",minLength:10,maxLength:200,when:{question:"programming-language",expression:"= java"}},{id:"3e7a1072-e20f-4362-8a27-b5aba6ac07a0",type:"text",question:"Describe your experience with this programming language",minLength:10,maxLength:200},{id:"3170e3b0-7795-4749-833f-30ca6f4c83a0",type:"rate",key:"rate-programming-language",question:"From 0 to 10, what is your level of expertise with this programming language",minRate:0,maxRate:10},{id:"48630b2e-593e-4b72-a509-b20591f026a2",type:"text",question:"What make you evaluate the programming language so low?",minLength:10,maxLength:200,when:{question:"rate-programming-language",expression:"<= 4"}}]}}},295:function(e){e.exports={payload:[{id:"982fb709-6148-4fc8-890f-1058ade6e134",title:"INAIL POC",description:"Sample Survey for INAIL POC",createdAt:"2019-07-24T16:31:03Z",submissions:17862}],metadata:{page:1,pageSize:10,totalItems:100},errors:[]}},296:function(e){e.exports={payload:[{surveyId:"982fb709-6148-4fc8-890f-1058ade6e134",submissionId:"953f4ace-067e-43c5-a212-71ede1d6fbca",submissionDate:"2019-07-25T04:31:33Z",answers:[{type:"rate",questionId:"3170e3b0-7795-4749-833f-30ca6f4c83a0",selectedRate:5},{type:"text",questionId:"3e7a1072-e20f-4362-8a27-b5aba6ac07a0",answerText:"This is an answer for that awesome question that I don't remember!"},{type:"list",questionId:"7aae5609-da9a-491b-bc5c-921ac2a2d7ab",selectedKeys:["javascript"]}]},{surveyId:"982fb709-6148-4fc8-890f-1058ade6e134",submissionId:"9ecfcf5c-1111-49f9-b6dc-1d524cba81aa",submissionDate:"2019-07-25T06:18:02Z",answers:[{type:"text",questionId:"3e7a1072-e20f-4362-8a27-b5aba6ac07a0",answerText:"dqdqwdqwdqwdqwdqwdqwdqw"},{type:"rate",questionId:"3170e3b0-7795-4749-833f-30ca6f4c83a0",selectedRate:6},{type:"list",questionId:"7aae5609-da9a-491b-bc5c-921ac2a2d7ab",selectedKeys:["javascript"]}]},{surveyId:"982fb709-6148-4fc8-890f-1058ade6e134",submissionId:"b735b282-d137-423e-b0fb-5b60da5bf47c",submissionDate:"2019-07-25T01:31:11Z",answers:[{type:"rate",questionId:"3170e3b0-7795-4749-833f-30ca6f4c83a0",selectedRate:5}]},{surveyId:"982fb709-6148-4fc8-890f-1058ade6e134",submissionId:"bd7c9ab3-f236-4b60-969e-629cf768ae06",submissionDate:"2019-07-25T06:00:26Z",answers:[{type:"text",questionId:"3e7a1072-e20f-4362-8a27-b5aba6ac07a0",answerText:"asddsaadsdasadsadsadsads"},{type:"rate",questionId:"3170e3b0-7795-4749-833f-30ca6f4c83a0",selectedRate:2},{type:"list",questionId:"7aae5609-da9a-491b-bc5c-921ac2a2d7ab",selectedKeys:["javascript"]}]},{surveyId:"982fb709-6148-4fc8-890f-1058ade6e134",submissionId:"e7a484a2-ddf9-42eb-9cf9-1f31fbac7fa7",submissionDate:"2019-07-25T06:16:27Z",answers:[{type:"text",questionId:"3e7a1072-e20f-4362-8a27-b5aba6ac07a0",answerText:"2fh892f3h89f23h892f3h89"},{type:"rate",questionId:"3170e3b0-7795-4749-833f-30ca6f4c83a0",selectedRate:3},{type:"list",questionId:"7aae5609-da9a-491b-bc5c-921ac2a2d7ab",selectedKeys:["javascript"]}]},{surveyId:"982fb709-6148-4fc8-890f-1058ade6e134",submissionId:"0a320625-221a-4dd4-b11f-739522a5d27f",submissionDate:"2019-07-25T04:31:28Z",answers:[{type:"rate",questionId:"3170e3b0-7795-4749-833f-30ca6f4c83a0",selectedRate:5},{type:"text",questionId:"3e7a1072-e20f-4362-8a27-b5aba6ac07a0",answerText:"This is an answer for that awesome question that I don't remember!"},{type:"list",questionId:"7aae5609-da9a-491b-bc5c-921ac2a2d7ab",selectedKeys:[]}]}],metadata:{page:1,pageSize:100,lastPage:1,totalItems:6,sort:"id",direction:"ASC",filters:[],additionalParams:{}},errors:[]}},297:function(e){e.exports={payload:{id:"982fb709-6148-4fc8-890f-1058ade6e134",title:"INAIL POC",description:"Sample Survey for INAIL POC",createdAt:"2019-07-24T16:31:03Z",submissions:17862,questions:[{id:"7aae5609-da9a-491b-bc5c-921ac2a2d7ab",type:"list",question:"What is the best programming language in your opinion?",options:[{key:"javascript",label:"Javascript",submissions:9987},{key:"golang",label:"Go",submissions:1697},{key:"java",label:"Java",submissions:6178}],multipleChoice:!1},{id:"3170e3b0-7795-4749-833f-30ca6f4c83a0",type:"rate",question:"From 0 to 10, what is your level of expertise with this programming language",minRate:0,maxRate:10,average:8.86},{id:"3e7a1072-e20f-4362-8a27-b5aba6ac07a0",type:"text",question:"Describe your experience with this programming language",minLength:10,maxLength:200}]}}},298:function(e){e.exports={payload:{surveyId:"982fb709-6148-4fc8-890f-1058ade6e134",submissionId:"953f4ace-067e-43c5-a212-71ede1d6fbca",submissionDate:"2019-07-25T04:31:33Z",answers:[{type:"rate",questionId:"3170e3b0-7795-4749-833f-30ca6f4c83a0",selectedRate:5},{type:"text",questionId:"3e7a1072-e20f-4362-8a27-b5aba6ac07a0",answerText:"This is an answer for that awesome question that I don't remember!"},{type:"list",questionId:"7aae5609-da9a-491b-bc5c-921ac2a2d7ab",selectedKeys:["javascript"]}]},errors:[]}},299:function(e){e.exports={payload:[{id:"2f8c59b1-9299-46f0-9c4a-90674752eeba",submittedAt:"2019-07-24T16:01:18Z",user:"admin",answer:"Praesent nec congue velit. Donec nec tempus metus, sit amet congue sem. Etiam efficitur posuere nisl, ac tempus orci vulputate."},{id:"a3737579-a4da-4358-92ba-d83ffb31a82f",submittedAt:"2019-07-24T16:09:52Z",user:"user",answer:"Donec dictum, lacus a condimentum ultricies, felis turpis malesuada ex, quis malesuada quam turpis vitae ante. In tristique magna ipsum."},{id:"c6a6c6b4-a0aa-4077-ac78-1dbab07789c7",submittedAt:"2019-07-24T16:46:33Z",user:"someone",answer:"Etiam in sem luctus, commodo ante vitae, aliquam lacus. Donec vel eleifend purus, at auctor tellus. Morbi non ex eu."},{id:"69a17191-ace8-4b93-987e-002fcca7ca5b",submittedAt:"2019-07-24T16:01:18Z",user:"joe",answer:"Curabitur non risus magna. Ut quis justo porttitor, semper tellus sit amet, eleifend odio. In et nisl ut leo luctus."},{id:"1efb01fc-d0de-4619-97f5-7861945dbd73",submittedAt:"2019-07-24T16:09:52Z",user:"sergio",answer:"Integer euismod ante ipsum, sed fringilla lorem tempor luctus. Quisque ornare rhoncus ipsum at pellentesque. Maecenas tincidunt semper tortor, non."},{id:"b6e7a779-ad72-4074-a83c-4acf65e1bbbc",submittedAt:"2019-07-24T16:46:33Z",user:"filipe",answer:"Donec faucibus lacus at est ornare, quis tincidunt velit elementum. Maecenas rutrum consectetur ante in maximus. Interdum et malesuada fames."}],metadata:{page:1,pageSize:10,totalItems:100},errors:[]}},415:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a(17),s=a(19),i=a(15),o=a(18),c=a(138),u=a(0),l=a.n(u),p=a(8),d=a.n(p),f=(a(108),a(139),a(210),a(212),a(141),a(142),a(216),a(143),a(219),a(12)),m=a.n(f),b=a(66),h=a(24),v=a(32),y=a(194),g=a(43),O=a(52),w=a(56),j=(a(109),w.a.Option),x=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={values:[]},a.onChangeValue=function(e){a.setState({value:e}),a.onValueChange(e)},a.onChange=function(e){var t=a.props.multipleChoice,n=a.state.values,r=e.target,s=r.value,i=r.checked;if(t){var o=n.indexOf(s),c=-1!==o;c&&!i?n.splice(o,1):!c&&i&&n.push(s),a.setState({values:n}),a.onValueChange(n)}else a.onChangeValue(s)},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"onValueChange",value:function(e){var t=this.props,a=t.multipleChoice,n=t.onValueChange;a?n(e,e.length>0):n([e],!!e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.question,n=t.options,r=t.multipleChoice;return l.a.createElement("div",{className:"question-container"},l.a.createElement("div",{className:"question"},a),r?l.a.createElement("div",null,n.map(function(t){return l.a.createElement(O.a,{key:t.key,className:"option",value:t.key,onChange:e.onChange},t.label)})):l.a.createElement("div",null,n.length>5?l.a.createElement(w.a,{showSearch:!0,onChange:this.onChangeValue,style:{width:"100%"},placeholder:"Select one option",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},n.map(function(e){return l.a.createElement(j,{key:e.key,value:e.key},e.label)})):l.a.createElement(g.a.Group,{onChange:this.onChange,value:this.state.value},n.map(function(e){return l.a.createElement(g.a,{key:e.key,className:"option",value:e.key},e.label)}))))}}]),t}(u.Component);x.defaultProps={id:"",type:"list",question:"",multipleChoice:!1,options:[]};var k=a(1),q=a.n(k),E=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={value:null,values:[]},a.onChange=function(e){var t=e.target.value;a.setState({value:t}),a.props.onValueChange(t,!0)},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){this.processProps(this.props)}},{key:"processProps",value:function(e){var t=e.maxRate,a=void 0===t?10:t,n=e.minRate,r=void 0===n?0:n,s=a-r,i=Array.apply(null,Array(s+1)).map(function(e,t){return t+r});this.setState({values:i})}},{key:"componentWillReceiveProps",value:function(e,t){this.processProps(e)}},{key:"render",value:function(){var e=this.props.question,t=this.state.values;return l.a.createElement("div",{className:"question-container"},l.a.createElement("div",{className:"question"},e),l.a.createElement(g.a.Group,{value:this.state.value,onChange:this.onChange},t.map(function(e){return l.a.createElement(g.a.Button,{key:e,value:e},e)})))}}]),t}(u.Component);x.propTypes={id:q.a.string.isRequired,type:q.a.string.isRequired,question:q.a.string.isRequired,minRate:q.a.number.isRequired,maxRate:q.a.number.isRequired},x.defaultProps={id:"",type:"rate",question:"",minRate:0,maxRate:10};var I=a(202).a.TextArea,S=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={value:""},a.onChange=function(e){var t=a.props,n=t.onValueChange,r=t.minLength,s=e.target.value;a.setState({value:s}),n(s,s.length>=r)},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.question,a=e.maxLength,n=e.minLength;return l.a.createElement("div",{className:"question-container"},l.a.createElement("div",{className:"question"},t),l.a.createElement("span",{className:"help"},n>0?"Fill at least ".concat(n," characters"):null),l.a.createElement(I,{style:{fontSize:18},onChange:this.onChange,placeholder:"Describe your answer here",autosize:{minRows:3},maxLength:a}),l.a.createElement("span",{className:"length"},"".concat(this.state.value.length,"/").concat(a)))}}]),t}(u.Component);x.propTypes={type:q.a.string.isRequired,question:q.a.string.isRequired,minLength:q.a.number.isRequired,maxLength:q.a.number.isRequired},x.defaultProps={type:"text",question:"",minLength:1,maxLength:200};a(277);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var D={list:x,rate:E,text:S},R=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={answers:{},finished:!1},a.submit=function(){var e=a.props.onSubmit,t=a.state.answers;e(Object.keys(t).map(function(e){var a=t[e];return{type:a.type,value:a.value,questionId:e,visible:a.visible}}).filter(function(e){return e.visible}).map(function(e){var t=e.type,a=e.value,n={questionId:e.questionId,type:t};return"rate"===t?n.selectedRate=a:"text"===t?n.answerText=a:"list"===t&&(n.selectedKeys=a),n}))},a.onValueChange=function(e){var t=e.id,n=e.key;return function(e,r){var s=a.state.answers,i=P({},s[t]);i.valid=r,r&&(i.value=e);var o=P({},s,Object(b.a)({},t,i));a.props.questions.filter(function(e){return e.when&&e.when.question===n}).forEach(function(t){var n=o[t.id],r=n.visible;n.visible=a.evaluate(t.when.expression,e),!r&&n.visible&&(n.valid=!1)}),a.setAnswers(o)}},a.renderQuestion=function(e){var t=D[e.type];return t&&l.a.createElement(t,Object.assign({key:e.id},e,{onValueChange:a.onValueChange(e)}))},a.evaluate=function(e,t){var a=/(!|=|<|>|<=|>=) (.*)/g.exec(e);if(a){var n=a[1],r=a[2];switch(n){case"=":return"number"===typeof t?Number(r)===t:"string"===typeof t?r===t:!(!t||!t.length)&&r===t[0];case"!=":return"number"===typeof t?Number(r)!==t:r!==t;case"<":return Number(r)<t;case">":return Number(r)>t;case"<=":case">=":return Number(r)>=t;default:return!1}}},a.shouldRender=function(e){return a.state.answers[e.id].visible},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){this.processProps(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){this.processProps(e)}},{key:"processProps",value:function(e){var t={};void 0!==e.questions&&(e.questions.forEach(function(e){var a=e.id,n=e.type,r=e.when;t[a]={valid:!!r,questionId:a,type:n,visible:!r}}),this.setState({answers:t}))}},{key:"setAnswers",value:function(e){var t=!0;for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];t&=n.valid||!n.visible}this.setState({answers:e,finished:t})}},{key:"render",value:function(){return l.a.createElement("div",{className:"survey"},this.props.questions.filter(this.shouldRender).map(this.renderQuestion),l.a.createElement(y.a,null),l.a.createElement("div",{style:{padding:20,paddingTop:0}},l.a.createElement(v.a,{type:"primary",disabled:!this.state.finished,onClick:this.submit},"Submit")))}}]),t}(u.Component);R.defaultProps={questions:[],onSubmit:function(){}};var T=a(105),A=a(75),L=a(62),N=a.n(L),K={serviceUrl:"/entando-survey",token:void 0},M=function(){var e={};return K.token&&(e={headers:{Authorization:"Bearer "+K.token}}),e},Z=function(e){e&&(K.serviceUrl=e)},U=function(e){e&&(K.token=e)},V=function(){var e=Object(h.a)(m.a.mark(function e(t){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:return e.next=5,N.a.get("".concat(K.serviceUrl,"/surveys/").concat(t),M());case 5:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(h.a)(m.a.mark(function e(t,a){var n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:return e.next=5,N.a.post("".concat(K.serviceUrl,"/surveys/").concat(t,"/submissions"),{answers:a},M());case 5:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),F=function(){var e=Object(h.a)(m.a.mark(function e(t){var a,n,r,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.page,n=void 0===a?1:a,e.next=4;break;case 4:return e.next=6,N.a.get("".concat(K.serviceUrl,"/surveys?page=").concat(n),M());case 6:return r=e.sent,s=r.data,e.abrupt("return",s);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(h.a)(m.a.mark(function e(t,a){var n,r,s,i;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.page,r=void 0===n?1:n,e.next=4;break;case 4:return e.next=6,N.a.get("".concat(K.serviceUrl,"/surveys/").concat(t,"/submissions?page=").concat(r),M());case 6:return s=e.sent,i=s.data,e.abrupt("return",i);case 9:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(h.a)(m.a.mark(function e(t,a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:return(n=document.createElement("a")).href="".concat(K.serviceUrl,"/surveys/").concat(t,"/submissions/export?submissionIds=").concat(a.join(",")),n.download="survey_export.pdf",n.click(),console.log("Downloading PDF",n.href),e.abrupt("return",new Promise(function(e){return setTimeout(e,500)}));case 9:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(h.a)(m.a.mark(function e(t){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:return e.next=5,N.a.get("".concat(K.serviceUrl,"/surveys/").concat(t),M());case 5:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(h.a)(m.a.mark(function e(t,a){var n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:return e.next=5,N.a.get("".concat(K.serviceUrl,"/surveys/").concat(t,"/submissions/").concat(a),M());case 5:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(h.a)(m.a.mark(function e(t,n){var r,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Using mock method"),e.abrupt("return",a(299));case 3:return e.next=5,N.a.get("".concat(K.serviceUrl,"/admin/survey/").concat(t,"/answers/").concat(n),M());case 5:return r=e.sent,s=r.data,e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),H=function(){return l.a.createElement("div",null,"Loading...")},_=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.error,n=e.onRetry,r=e.children;return t?l.a.createElement(H,null):a?l.a.createElement(T.a,{status:"error",title:a,subTitle:"Please try again",extra:[l.a.createElement(v.a,{onClick:n},"Back")]}):r()}}]),t}(u.Component);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}_.defaultProps={loading:!1,error:"",onRetry:function(){},children:function(){}};var $=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={loaded:!1,loading:!1,submitting:!1,questions:[]},a.onSubmit=function(e){var t=a.props.surveyId;a.setState({submitting:!0}),W(t,e).then(function(){return a.setState({success:!0})}).catch(function(){return a.setState({error:"Something bad happened"})}).then(function(){return a.setState({submitting:!1})})},a.clearError=function(){a.setState({error:null}),a.state.loaded||a.fetchData()},a.renderContent=function(){var e=l.a.createElement(R,{questions:a.state.questions,onSubmit:a.onSubmit});return a.state.submitting?l.a.createElement(A.a,{tip:"Submitting Survey"},e):e},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=Object(h.a)(m.a.mark(function e(){var t,a=this;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.surveyId,this.setState({loading:!0}),V(t).then(function(e){var t=e.payload;return a.setState(Y({},t,{loaded:!0}))}).catch(function(){a.setState({error:"Something bad happened"})}).then(function(){return a.setState({loading:!1})});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.success,a=e.error,n=e.loading;return t?l.a.createElement(T.a,{status:"success",title:"The survey has been submitted successfully",subTitle:"We really appreciate your contribution"}):l.a.createElement(_,{error:a,loading:n,onRetry:this.clearError},this.renderContent)}}]),t}(u.Component);$.defaultProps={surveyId:""};var ee=a(76),te=a(58),ae=(a(125),a(167),a(309),a(312),a(314),a(168),a(170),a(316),a(77)),ne=[{title:"Title",dataIndex:"title",key:"title",render:function(e,t){return l.a.createElement(ee.b,{to:"/".concat(t.id)},e)}},{title:"Submissions",dataIndex:"submissions",key:"submissions",render:function(){return 376}},{title:"Description",dataIndex:"description",key:"description"}],re=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1,dataSource:[]},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=Object(h.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({loading:!0}),e.next=4,F({page:1});case 4:t=e.sent,a=t.payload,n=t.metadata,this.setState({dataSource:a,metadata:n});case 8:return e.prev=8,this.setState({loading:!1}),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[0,,8,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement(ae.a,{rowKey:"id",dataSource:this.state.dataSource,loading:this.state.loading,columns:ne})}}]),t}(u.Component),se=a(78),ie=a(201),oe=a(38),ce=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).calculateProgress=function(){return Math.floor(100*Math.random())},a.columns=[{title:"Option",dataIndex:"label",key:"label"},{title:"Submissions",dataIndex:"submissions",key:"submissionsQuantity",render:function(){return"376"}},{title:"Submissions",dataIndex:"submissions",key:"submissionsProgress",render:function(e){return l.a.createElement(ie.a,{percent:a.calculateProgress(e)})},width:"100%"}],a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.question,a=e.options,n=e.submissions;return l.a.createElement(oe.a,{className:"questionDetail",title:t,extra:"".concat(n," submissions")},l.a.createElement(ae.a,{rowKey:"key",pagination:!1,showHeader:!1,dataSource:a,columns:this.columns}))}}]),t}(u.Component),ue=a(203),le=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.question,a=e.submissions,n=this.props,r=(n.minRate+n.maxRate)/2;return l.a.createElement(oe.a,{className:"questionDetail",title:t,extra:"".concat(a," submissions")},l.a.createElement(ue.a,{value:r,precision:2}))}}]),t}(u.Component),pe=a(60),de=a(34),fe=a(200),me={list:ce,rate:le,text:function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!0},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=Object(h.a)(m.a.mark(function e(){var t,a,n,r,s,i;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props,a=t.questionId,n=t.id,this.setState({loading:!0}),e.next=5,B(a,n);case 5:r=e.sent,s=r.payload,i=r.metadata,this.setState({answers:s,metadata:i});case 9:return e.prev=9,this.setState({loading:!1}),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[0,,9,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.question,a=e.submissions;return l.a.createElement(oe.a,{className:"questionDetail",title:t,extra:"".concat(a," submissions")},l.a.createElement(pe.a,null,this.state.loading?l.a.createElement(H,null):this.state.answers.map(function(e){var t=e.id,a=e.user,n=e.answer;return l.a.createElement(de.a,{key:t,span:12},l.a.createElement(oe.a,null,l.a.createElement(fe.a,{className:"answerText",author:a,content:l.a.createElement("p",null,n)})))})))}}]),t}(u.Component)},be=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).renderQuestion=function(e){var t=me[e.type];return t&&l.a.createElement(t,Object.assign({key:e.id},e,{submissions:a.props.survey.submissions}))},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.survey;return l.a.createElement(u.Fragment,null,e.questions.map(this.renderQuestion))}}]),t}(u.Component);be.defaultProps={survey:{questions:[]}};var he=[{title:"#",dataIndex:"submissionId",key:"submissionId",render:function(e,t){return l.a.createElement(ee.b,{to:"/".concat(t.surveyId,"/submissions/").concat(t.submissionId)},e)}},{title:"Date",dataIndex:"submissionDate",key:"submissionDate"}],ve=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1,exporting:!1,dataSource:[],selectedRowKeys:[]},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.exportPdf=Object(h.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.surveyId,e.prev=1,a.setState({exporting:!0}),e.next=5,J(t,a.state.selectedRowKeys);case 5:return e.prev=5,a.setState({exporting:!1}),e.finish(5);case 8:case"end":return e.stop()}},e,null,[[1,,5,8]])})),a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=Object(h.a)(m.a.mark(function e(){var t,a,n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.surveyId,this.setState({loading:!0}),e.next=5,Q(t,{page:1});case 5:a=e.sent,n=a.payload,r=a.metadata,this.setState({dataSource:n,metadata:r});case 9:return e.prev=9,this.setState({loading:!1}),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[0,,9,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.selectedRowKeys,a=e.dataSource,n=e.loading,r={selectedRowKeys:t,onChange:this.onSelectChange},s=l.a.createElement(v.a,{type:"primary",disabled:!t.length,onClick:this.exportPdf},"Export as PDF"),i=l.a.createElement(ae.a,{rowKey:"submissionId",rowSelection:r,dataSource:a,loading:n,columns:he});return l.a.createElement(u.Fragment,null,l.a.createElement(oe.a,{title:"Submissions",extra:s},this.state.exporting?l.a.createElement(A.a,{tip:"Exporting"},"table"):i))}}]),t}(u.Component);ve.defaultProps={surveyId:""};a(190);var ye=se.a.TabPane,ge=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!0,dataSource:[]},a.fetchData=Object(h.a)(m.a.mark(function e(){var t,n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match,e.prev=1,a.setState({loading:!0,error:""}),e.next=5,z(t.params.id);case 5:n=e.sent,(r=n.payload).submissions=376,a.setState({survey:r}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a.setState({error:e.t0.message});case 14:return e.prev=14,a.setState({loading:!1}),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])})),a.renderContent=function(){return l.a.createElement(se.a,null,l.a.createElement(ye,{tab:"Responses",key:"responses"},l.a.createElement(ve,{surveyId:a.state.survey.id})),l.a.createElement(ye,{tab:"Analytics",key:"analytics",style:{padding:"0 15px"}},a.state.loading?l.a.createElement(H,null):l.a.createElement(be,{survey:a.state.survey})))},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.error;return l.a.createElement(_,{error:a,loading:t,onRetry:this.fetchData},this.renderContent)}}]),t}(u.Component);function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}ge.defaultProps={match:{params:{id:""}}};var we=function(e){var t=e.question,a=e.answer;return l.a.createElement(oe.a,{className:"questionDetail",title:t},l.a.createElement("div",null,a))},je=function(e,t){return t.map(function(t){return e.options.filter(function(e){return e.key===t}).map(function(e){return e.label})[0]}).join(", ")},xe={text:function(e){var t=e.answerText,a=e.question;return l.a.createElement(we,{question:a.question,answer:t})},list:function(e){var t=e.selectedKeys,a=e.question;return l.a.createElement(we,{question:a.question,answer:je(a,t)})},rate:function(e){var t=e.selectedRate,a=e.question;return l.a.createElement(we,{question:a.question,answer:t})}},ke=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!0,dataSource:[]},a.fetchData=Object(h.a)(m.a.mark(function e(){var t,n,r,s,i;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.surveyId,r=t.submissionId,e.prev=2,a.setState({loading:!0,error:""}),e.next=6,G(n,r);case 6:s=e.sent,i=s.payload,a.processSubmission(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),a.setState({error:e.t0.message});case 14:return e.prev=14,a.setState({loading:!1}),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[2,11,14,17]])})),a.renderQuestion=function(e){var t=xe[e.type];return t&&l.a.createElement(t,Object.assign({key:e.questionId},e))},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"processSubmission",value:function(e){var t=e.answers,a=e.survey.questions;t.forEach(function(e){return e.question=(t=e.questionId,a.filter(function(e){return e.id===t})[0]);var t}),this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e))}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.answers,r=t.error;return l.a.createElement(_,{error:r,loading:a,onRetry:this.fetchData},function(){return n.map(e.renderQuestion)})}}]),t}(u.Component);ke.defaultProps={match:{params:{surveyId:"",submissionId:""}}};var qe=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement(ee.a,null,l.a.createElement(te.a,{path:"/",exact:!0,component:re}),l.a.createElement(te.a,{path:"/:id",exact:!0,component:ge}),l.a.createElement(te.a,{path:"/:surveyId/submissions/:submissionId",component:ke}))}}]),t}(u.Component),Ee=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"connectedCallback",value:function(){var e=document.createElement("div");this.appendChild(e),Z(this.getAttribute("service-url")),U(localStorage.getItem("token"));var t=this.getAttribute("survey-id");d.a.render(l.a.createElement($,{surveyId:t},null),e)}}]),t}(Object(c.a)(HTMLElement)),Ie=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"connectedCallback",value:function(){var e=document.createElement("div");this.appendChild(e),Z(this.getAttribute("service-url")),U(localStorage.getItem("token")),d.a.render(l.a.createElement(qe,{},null),e)}}]),t}(Object(c.a)(HTMLElement));customElements.define("en-survey",Ee),customElements.define("en-survey-admin",Ie)},8:function(e,t){e.exports=ReactDOM}},[[206,1,2]]]);
//# sourceMappingURL=main.chunk.js.map